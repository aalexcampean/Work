{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Directive, Inject, Input, HostBinding, HostListener, Injectable, EventEmitter, Component, ContentChildren, Output, NgModule } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { takeUntil, distinctUntilChanged } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nconst _c0 = [\"mdbScrollspy\", \"\"];\nconst _c1 = [\"*\"];\n\nclass MdbScrollspyLinkDirective {\n  constructor(cdRef, document) {\n    this.cdRef = cdRef;\n    this.document = document;\n    this._scrollIntoView = true;\n    this.scrollspyLink = true;\n    this.active = false;\n  }\n\n  get scrollIntoView() {\n    return this._scrollIntoView;\n  }\n\n  set scrollIntoView(value) {\n    this._scrollIntoView = value;\n  }\n\n  get section() {\n    return this._section;\n  }\n\n  set section(value) {\n    if (value) {\n      this._section = value;\n    }\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  set id(newId) {\n    if (newId) {\n      this._id = newId;\n    }\n  }\n\n  onClick() {\n    if (this.section && this.scrollIntoView === true) {\n      this.section.scrollIntoView();\n    }\n  }\n\n  detectChanges() {\n    this.cdRef.detectChanges();\n  }\n\n  assignSectionToId() {\n    this.section = this.document.documentElement.querySelector(`#${this.id}`);\n  }\n\n  ngOnInit() {\n    this.assignSectionToId();\n  }\n\n}\n\nMdbScrollspyLinkDirective.ɵfac = function MdbScrollspyLinkDirective_Factory(t) {\n  return new (t || MdbScrollspyLinkDirective)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(DOCUMENT));\n};\n\nMdbScrollspyLinkDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: MdbScrollspyLinkDirective,\n  selectors: [[\"\", \"mdbScrollspyLink\", \"\"]],\n  hostVars: 4,\n  hostBindings: function MdbScrollspyLinkDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function MdbScrollspyLinkDirective_click_HostBindingHandler() {\n        return ctx.onClick();\n      });\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"scrollspy-link\", ctx.scrollspyLink)(\"active\", ctx.active);\n    }\n  },\n  inputs: {\n    scrollIntoView: \"scrollIntoView\",\n    id: [\"mdbScrollspyLink\", \"id\"]\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MdbScrollspyLinkDirective, [{\n    type: Directive,\n    args: [{\n      // eslint-disable-next-line @angular-eslint/directive-selector\n      selector: '[mdbScrollspyLink]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, {\n    scrollIntoView: [{\n      type: Input\n    }],\n    id: [{\n      type: Input,\n      args: ['mdbScrollspyLink']\n    }],\n    scrollspyLink: [{\n      type: HostBinding,\n      args: ['class.scrollspy-link']\n    }],\n    active: [{\n      type: HostBinding,\n      args: ['class.active']\n    }],\n    onClick: [{\n      type: HostListener,\n      args: ['click', []]\n    }]\n  });\n})();\n\nclass MdbScrollspyService {\n  constructor() {\n    this.scrollSpys = [];\n    this.activeSubject = new Subject();\n    this.active$ = this.activeSubject;\n  }\n\n  addScrollspy(scrollSpy) {\n    this.scrollSpys.push(scrollSpy);\n  }\n\n  removeScrollspy(scrollSpyId) {\n    const scrollSpyIndex = this.scrollSpys.findIndex(spy => {\n      return spy.id === scrollSpyId;\n    });\n    this.scrollSpys.splice(scrollSpyIndex, 1);\n  }\n\n  updateActiveState(scrollSpyId, activeLinkId) {\n    const scrollSpy = this.scrollSpys.find(spy => {\n      return spy.id === scrollSpyId;\n    });\n\n    if (!scrollSpy) {\n      return;\n    }\n\n    const activeLink = scrollSpy.links.find(link => {\n      return link.id === activeLinkId;\n    });\n    this.setActiveLink(activeLink);\n  }\n\n  removeActiveState(scrollSpyId, activeLinkId) {\n    const scrollSpy = this.scrollSpys.find(spy => {\n      return spy.id === scrollSpyId;\n    });\n\n    if (!scrollSpy) {\n      return;\n    }\n\n    const activeLink = scrollSpy.links.find(link => {\n      return link.id === activeLinkId;\n    });\n\n    if (!activeLink) {\n      return;\n    }\n\n    activeLink.active = false;\n    activeLink.detectChanges();\n  }\n\n  setActiveLink(activeLink) {\n    if (activeLink) {\n      activeLink.active = true;\n      activeLink.detectChanges();\n      this.activeSubject.next(activeLink);\n    }\n  }\n\n  removeActiveLinks(scrollSpyId) {\n    const scrollSpy = this.scrollSpys.find(spy => {\n      return spy.id === scrollSpyId;\n    });\n\n    if (!scrollSpy) {\n      return;\n    }\n\n    scrollSpy.links.forEach(link => {\n      link.active = false;\n      link.detectChanges();\n    });\n  }\n\n}\n\nMdbScrollspyService.ɵfac = function MdbScrollspyService_Factory(t) {\n  return new (t || MdbScrollspyService)();\n};\n\nMdbScrollspyService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: MdbScrollspyService,\n  factory: MdbScrollspyService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MdbScrollspyService, [{\n    type: Injectable\n  }], null, null);\n})(); // eslint-disable-next-line @angular-eslint/component-class-suffix\n\n\nclass MdbScrollspyDirective {\n  constructor(scrollSpyService) {\n    this.scrollSpyService = scrollSpyService;\n    this._destroy$ = new Subject();\n    this.activeLinkChange = new EventEmitter();\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  set id(newId) {\n    if (newId) {\n      this._id = newId;\n    }\n  }\n\n  ngOnInit() {\n    this.activeSub = this.scrollSpyService.active$.pipe(takeUntil(this._destroy$), distinctUntilChanged()).subscribe(activeLink => {\n      this.activeLinkChange.emit(activeLink);\n    });\n  }\n\n  ngAfterContentInit() {\n    this.scrollSpyService.addScrollspy({\n      id: this.id,\n      links: this.links\n    });\n  }\n\n  ngOnDestroy() {\n    this.scrollSpyService.removeScrollspy(this.id);\n\n    this._destroy$.next();\n\n    this._destroy$.complete();\n  }\n\n}\n\nMdbScrollspyDirective.ɵfac = function MdbScrollspyDirective_Factory(t) {\n  return new (t || MdbScrollspyDirective)(i0.ɵɵdirectiveInject(MdbScrollspyService));\n};\n\nMdbScrollspyDirective.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MdbScrollspyDirective,\n  selectors: [[\"\", \"mdbScrollspy\", \"\"]],\n  contentQueries: function MdbScrollspyDirective_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      i0.ɵɵcontentQuery(dirIndex, MdbScrollspyLinkDirective, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.links = _t);\n    }\n  },\n  inputs: {\n    id: [\"mdbScrollspy\", \"id\"]\n  },\n  outputs: {\n    activeLinkChange: \"activeLinkChange\"\n  },\n  attrs: _c0,\n  ngContentSelectors: _c1,\n  decls: 1,\n  vars: 0,\n  template: function MdbScrollspyDirective_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵprojection(0);\n    }\n  },\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MdbScrollspyDirective, [{\n    type: Component,\n    args: [{\n      // eslint-disable-next-line @angular-eslint/component-selector\n      selector: '[mdbScrollspy]',\n      template: '<ng-content></ng-content>'\n    }]\n  }], function () {\n    return [{\n      type: MdbScrollspyService\n    }];\n  }, {\n    links: [{\n      type: ContentChildren,\n      args: [MdbScrollspyLinkDirective, {\n        descendants: true\n      }]\n    }],\n    id: [{\n      type: Input,\n      args: ['mdbScrollspy']\n    }],\n    activeLinkChange: [{\n      type: Output\n    }]\n  });\n})(); // eslint-disable-next-line @angular-eslint/directive-class-suffix\n\n\nclass MdbScrollspyElementDirective {\n  constructor(_elementRef, renderer, ngZone, scrollSpyService) {\n    this._elementRef = _elementRef;\n    this.renderer = renderer;\n    this.ngZone = ngZone;\n    this.scrollSpyService = scrollSpyService;\n    this.offset = 0;\n  }\n\n  get host() {\n    return this._elementRef.nativeElement;\n  }\n\n  get scrollSpyId() {\n    return this._scrollSpyId;\n  }\n\n  set scrollSpyId(newId) {\n    if (newId) {\n      this._scrollSpyId = newId;\n    }\n  }\n\n  isElementInViewport() {\n    const scrollTop = this.container.scrollTop;\n    const elTop = this.host.offsetTop - this.offset;\n    const elHeight = this.host.offsetHeight;\n    return scrollTop >= elTop && scrollTop < elTop + elHeight;\n  }\n\n  updateActiveState(scrollSpyId, id) {\n    if (this.isElementInViewport()) {\n      this.scrollSpyService.removeActiveLinks(scrollSpyId);\n      this.scrollSpyService.updateActiveState(scrollSpyId, id);\n    }\n  }\n\n  onScroll() {\n    this.updateActiveState(this.scrollSpyId, this.id);\n  }\n\n  listenToScroll() {\n    this.renderer.listen(this.container, 'scroll', () => {\n      this.onScroll();\n    });\n  }\n\n  ngOnInit() {\n    this.id = this.host.id;\n\n    if (!this.container) {\n      this.container = this._getClosestEl(this.host, '.scrollspy-container');\n    }\n\n    this.renderer.setStyle(this.container, 'position', 'relative');\n    this.ngZone.runOutsideAngular(this.listenToScroll.bind(this));\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.updateActiveState(this.scrollSpyId, this.id);\n    }, 0);\n  }\n\n  _getClosestEl(el, selector) {\n    for (; el && el !== document; el = el.parentNode) {\n      if (el.matches && el.matches(selector)) {\n        return el;\n      }\n    }\n\n    return null;\n  }\n\n}\n\nMdbScrollspyElementDirective.ɵfac = function MdbScrollspyElementDirective_Factory(t) {\n  return new (t || MdbScrollspyElementDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(MdbScrollspyService));\n};\n\nMdbScrollspyElementDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: MdbScrollspyElementDirective,\n  selectors: [[\"\", \"mdbScrollspyElement\", \"\"]],\n  inputs: {\n    container: \"container\",\n    scrollSpyId: [\"mdbScrollspyElement\", \"scrollSpyId\"],\n    offset: \"offset\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MdbScrollspyElementDirective, [{\n    type: Directive,\n    args: [{\n      // eslint-disable-next-line @angular-eslint/directive-selector\n      selector: '[mdbScrollspyElement]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i0.NgZone\n    }, {\n      type: MdbScrollspyService\n    }];\n  }, {\n    container: [{\n      type: Input\n    }],\n    scrollSpyId: [{\n      type: Input,\n      args: ['mdbScrollspyElement']\n    }],\n    offset: [{\n      type: Input\n    }]\n  });\n})();\n\nclass MdbScrollspyWindowDirective {\n  constructor(document, el, renderer, ngZone, scrollSpyService) {\n    this.document = document;\n    this.el = el;\n    this.renderer = renderer;\n    this.ngZone = ngZone;\n    this.scrollSpyService = scrollSpyService;\n    this.offset = 0;\n  }\n\n  get scrollSpyId() {\n    return this._scrollSpyId;\n  }\n\n  set scrollSpyId(newId) {\n    if (newId) {\n      this._scrollSpyId = newId;\n    }\n  }\n\n  isElementInViewport() {\n    const scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop;\n    const elHeight = this.el.nativeElement.offsetHeight;\n    const elTop = this.el.nativeElement.offsetTop - this.offset;\n    const elBottom = elTop + elHeight;\n    return scrollTop >= elTop && scrollTop <= elBottom;\n  }\n\n  updateActiveState(scrollSpyId, id) {\n    if (this.isElementInViewport()) {\n      this.scrollSpyService.updateActiveState(scrollSpyId, id);\n    } else {\n      this.scrollSpyService.removeActiveState(scrollSpyId, id);\n    }\n  }\n\n  onScroll() {\n    this.updateActiveState(this.scrollSpyId, this.id);\n  }\n\n  listenToScroll() {\n    this.renderer.listen(window, 'scroll', () => {\n      this.onScroll();\n    });\n  }\n\n  ngOnInit() {\n    this.id = this.el.nativeElement.id;\n    this.ngZone.runOutsideAngular(this.listenToScroll.bind(this));\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.updateActiveState(this.scrollSpyId, this.id);\n    }, 0);\n  }\n\n}\n\nMdbScrollspyWindowDirective.ɵfac = function MdbScrollspyWindowDirective_Factory(t) {\n  return new (t || MdbScrollspyWindowDirective)(i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(MdbScrollspyService));\n};\n\nMdbScrollspyWindowDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: MdbScrollspyWindowDirective,\n  selectors: [[\"\", \"mdbScrollspyWindow\", \"\"]],\n  inputs: {\n    scrollSpyId: [\"mdbScrollspyWindow\", \"scrollSpyId\"],\n    offset: \"offset\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MdbScrollspyWindowDirective, [{\n    type: Directive,\n    args: [{\n      // eslint-disable-next-line @angular-eslint/directive-selector\n      selector: '[mdbScrollspyWindow]'\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i0.NgZone\n    }, {\n      type: MdbScrollspyService\n    }];\n  }, {\n    scrollSpyId: [{\n      type: Input,\n      args: ['mdbScrollspyWindow']\n    }],\n    offset: [{\n      type: Input\n    }]\n  });\n})();\n\nclass MdbScrollspyModule {}\n\nMdbScrollspyModule.ɵfac = function MdbScrollspyModule_Factory(t) {\n  return new (t || MdbScrollspyModule)();\n};\n\nMdbScrollspyModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: MdbScrollspyModule\n});\nMdbScrollspyModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [MdbScrollspyService]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MdbScrollspyModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [MdbScrollspyDirective, MdbScrollspyLinkDirective, MdbScrollspyElementDirective, MdbScrollspyWindowDirective],\n      exports: [MdbScrollspyDirective, MdbScrollspyLinkDirective, MdbScrollspyElementDirective, MdbScrollspyWindowDirective],\n      providers: [MdbScrollspyService]\n    }]\n  }], null, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { MdbScrollspyDirective, MdbScrollspyElementDirective, MdbScrollspyLinkDirective, MdbScrollspyModule, MdbScrollspyService, MdbScrollspyWindowDirective };","map":{"version":3,"sources":["/Users/alexcampean/Documents/university/sem_4/WEB/labs/a9/client/node_modules/mdb-angular-ui-kit/fesm2015/mdb-angular-ui-kit-scrollspy.mjs"],"names":["i0","Directive","Inject","Input","HostBinding","HostListener","Injectable","EventEmitter","Component","ContentChildren","Output","NgModule","DOCUMENT","takeUntil","distinctUntilChanged","Subject","MdbScrollspyLinkDirective","constructor","cdRef","document","_scrollIntoView","scrollspyLink","active","scrollIntoView","value","section","_section","id","_id","newId","onClick","detectChanges","assignSectionToId","documentElement","querySelector","ngOnInit","ɵfac","ChangeDetectorRef","ɵdir","type","args","selector","undefined","decorators","MdbScrollspyService","scrollSpys","activeSubject","active$","addScrollspy","scrollSpy","push","removeScrollspy","scrollSpyId","scrollSpyIndex","findIndex","spy","splice","updateActiveState","activeLinkId","find","activeLink","links","link","setActiveLink","removeActiveState","next","removeActiveLinks","forEach","ɵprov","MdbScrollspyDirective","scrollSpyService","_destroy$","activeLinkChange","activeSub","pipe","subscribe","emit","ngAfterContentInit","ngOnDestroy","complete","ɵcmp","template","descendants","MdbScrollspyElementDirective","_elementRef","renderer","ngZone","offset","host","nativeElement","_scrollSpyId","isElementInViewport","scrollTop","container","elTop","offsetTop","elHeight","offsetHeight","onScroll","listenToScroll","listen","_getClosestEl","setStyle","runOutsideAngular","bind","ngAfterViewInit","setTimeout","el","parentNode","matches","ElementRef","Renderer2","NgZone","MdbScrollspyWindowDirective","body","elBottom","window","MdbScrollspyModule","ɵmod","ɵinj","declarations","exports","providers"],"mappings":"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","sourcesContent":["import * as i0 from '@angular/core';\nimport { Directive, Inject, Input, HostBinding, HostListener, Injectable, EventEmitter, Component, ContentChildren, Output, NgModule } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { takeUntil, distinctUntilChanged } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nclass MdbScrollspyLinkDirective {\n    constructor(cdRef, document) {\n        this.cdRef = cdRef;\n        this.document = document;\n        this._scrollIntoView = true;\n        this.scrollspyLink = true;\n        this.active = false;\n    }\n    get scrollIntoView() {\n        return this._scrollIntoView;\n    }\n    set scrollIntoView(value) {\n        this._scrollIntoView = value;\n    }\n    get section() {\n        return this._section;\n    }\n    set section(value) {\n        if (value) {\n            this._section = value;\n        }\n    }\n    get id() {\n        return this._id;\n    }\n    set id(newId) {\n        if (newId) {\n            this._id = newId;\n        }\n    }\n    onClick() {\n        if (this.section && this.scrollIntoView === true) {\n            this.section.scrollIntoView();\n        }\n    }\n    detectChanges() {\n        this.cdRef.detectChanges();\n    }\n    assignSectionToId() {\n        this.section = this.document.documentElement.querySelector(`#${this.id}`);\n    }\n    ngOnInit() {\n        this.assignSectionToId();\n    }\n}\nMdbScrollspyLinkDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyLinkDirective, deps: [{ token: i0.ChangeDetectorRef }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Directive });\nMdbScrollspyLinkDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.2.4\", type: MdbScrollspyLinkDirective, selector: \"[mdbScrollspyLink]\", inputs: { scrollIntoView: \"scrollIntoView\", id: [\"mdbScrollspyLink\", \"id\"] }, host: { listeners: { \"click\": \"onClick()\" }, properties: { \"class.scrollspy-link\": \"this.scrollspyLink\", \"class.active\": \"this.active\" } }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyLinkDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    // eslint-disable-next-line @angular-eslint/directive-selector\n                    selector: '[mdbScrollspyLink]',\n                }]\n        }], ctorParameters: function () {\n        return [{ type: i0.ChangeDetectorRef }, { type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }];\n    }, propDecorators: { scrollIntoView: [{\n                type: Input\n            }], id: [{\n                type: Input,\n                args: ['mdbScrollspyLink']\n            }], scrollspyLink: [{\n                type: HostBinding,\n                args: ['class.scrollspy-link']\n            }], active: [{\n                type: HostBinding,\n                args: ['class.active']\n            }], onClick: [{\n                type: HostListener,\n                args: ['click', []]\n            }] } });\n\nclass MdbScrollspyService {\n    constructor() {\n        this.scrollSpys = [];\n        this.activeSubject = new Subject();\n        this.active$ = this.activeSubject;\n    }\n    addScrollspy(scrollSpy) {\n        this.scrollSpys.push(scrollSpy);\n    }\n    removeScrollspy(scrollSpyId) {\n        const scrollSpyIndex = this.scrollSpys.findIndex((spy) => {\n            return spy.id === scrollSpyId;\n        });\n        this.scrollSpys.splice(scrollSpyIndex, 1);\n    }\n    updateActiveState(scrollSpyId, activeLinkId) {\n        const scrollSpy = this.scrollSpys.find((spy) => {\n            return spy.id === scrollSpyId;\n        });\n        if (!scrollSpy) {\n            return;\n        }\n        const activeLink = scrollSpy.links.find((link) => {\n            return link.id === activeLinkId;\n        });\n        this.setActiveLink(activeLink);\n    }\n    removeActiveState(scrollSpyId, activeLinkId) {\n        const scrollSpy = this.scrollSpys.find((spy) => {\n            return spy.id === scrollSpyId;\n        });\n        if (!scrollSpy) {\n            return;\n        }\n        const activeLink = scrollSpy.links.find((link) => {\n            return link.id === activeLinkId;\n        });\n        if (!activeLink) {\n            return;\n        }\n        activeLink.active = false;\n        activeLink.detectChanges();\n    }\n    setActiveLink(activeLink) {\n        if (activeLink) {\n            activeLink.active = true;\n            activeLink.detectChanges();\n            this.activeSubject.next(activeLink);\n        }\n    }\n    removeActiveLinks(scrollSpyId) {\n        const scrollSpy = this.scrollSpys.find((spy) => {\n            return spy.id === scrollSpyId;\n        });\n        if (!scrollSpy) {\n            return;\n        }\n        scrollSpy.links.forEach((link) => {\n            link.active = false;\n            link.detectChanges();\n        });\n    }\n}\nMdbScrollspyService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nMdbScrollspyService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyService, decorators: [{\n            type: Injectable\n        }] });\n\n// eslint-disable-next-line @angular-eslint/component-class-suffix\nclass MdbScrollspyDirective {\n    constructor(scrollSpyService) {\n        this.scrollSpyService = scrollSpyService;\n        this._destroy$ = new Subject();\n        this.activeLinkChange = new EventEmitter();\n    }\n    get id() {\n        return this._id;\n    }\n    set id(newId) {\n        if (newId) {\n            this._id = newId;\n        }\n    }\n    ngOnInit() {\n        this.activeSub = this.scrollSpyService.active$\n            .pipe(takeUntil(this._destroy$), distinctUntilChanged())\n            .subscribe((activeLink) => {\n            this.activeLinkChange.emit(activeLink);\n        });\n    }\n    ngAfterContentInit() {\n        this.scrollSpyService.addScrollspy({ id: this.id, links: this.links });\n    }\n    ngOnDestroy() {\n        this.scrollSpyService.removeScrollspy(this.id);\n        this._destroy$.next();\n        this._destroy$.complete();\n    }\n}\nMdbScrollspyDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyDirective, deps: [{ token: MdbScrollspyService }], target: i0.ɵɵFactoryTarget.Component });\nMdbScrollspyDirective.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.4\", type: MdbScrollspyDirective, selector: \"[mdbScrollspy]\", inputs: { id: [\"mdbScrollspy\", \"id\"] }, outputs: { activeLinkChange: \"activeLinkChange\" }, queries: [{ propertyName: \"links\", predicate: MdbScrollspyLinkDirective, descendants: true }], ngImport: i0, template: '<ng-content></ng-content>', isInline: true });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyDirective, decorators: [{\n            type: Component,\n            args: [{\n                    // eslint-disable-next-line @angular-eslint/component-selector\n                    selector: '[mdbScrollspy]',\n                    template: '<ng-content></ng-content>',\n                }]\n        }], ctorParameters: function () { return [{ type: MdbScrollspyService }]; }, propDecorators: { links: [{\n                type: ContentChildren,\n                args: [MdbScrollspyLinkDirective, { descendants: true }]\n            }], id: [{\n                type: Input,\n                args: ['mdbScrollspy']\n            }], activeLinkChange: [{\n                type: Output\n            }] } });\n\n// eslint-disable-next-line @angular-eslint/directive-class-suffix\nclass MdbScrollspyElementDirective {\n    constructor(_elementRef, renderer, ngZone, scrollSpyService) {\n        this._elementRef = _elementRef;\n        this.renderer = renderer;\n        this.ngZone = ngZone;\n        this.scrollSpyService = scrollSpyService;\n        this.offset = 0;\n    }\n    get host() {\n        return this._elementRef.nativeElement;\n    }\n    get scrollSpyId() {\n        return this._scrollSpyId;\n    }\n    set scrollSpyId(newId) {\n        if (newId) {\n            this._scrollSpyId = newId;\n        }\n    }\n    isElementInViewport() {\n        const scrollTop = this.container.scrollTop;\n        const elTop = this.host.offsetTop - this.offset;\n        const elHeight = this.host.offsetHeight;\n        return scrollTop >= elTop && scrollTop < elTop + elHeight;\n    }\n    updateActiveState(scrollSpyId, id) {\n        if (this.isElementInViewport()) {\n            this.scrollSpyService.removeActiveLinks(scrollSpyId);\n            this.scrollSpyService.updateActiveState(scrollSpyId, id);\n        }\n    }\n    onScroll() {\n        this.updateActiveState(this.scrollSpyId, this.id);\n    }\n    listenToScroll() {\n        this.renderer.listen(this.container, 'scroll', () => {\n            this.onScroll();\n        });\n    }\n    ngOnInit() {\n        this.id = this.host.id;\n        if (!this.container) {\n            this.container = this._getClosestEl(this.host, '.scrollspy-container');\n        }\n        this.renderer.setStyle(this.container, 'position', 'relative');\n        this.ngZone.runOutsideAngular(this.listenToScroll.bind(this));\n    }\n    ngAfterViewInit() {\n        setTimeout(() => {\n            this.updateActiveState(this.scrollSpyId, this.id);\n        }, 0);\n    }\n    _getClosestEl(el, selector) {\n        for (; el && el !== document; el = el.parentNode) {\n            if (el.matches && el.matches(selector)) {\n                return el;\n            }\n        }\n        return null;\n    }\n}\nMdbScrollspyElementDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyElementDirective, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i0.NgZone }, { token: MdbScrollspyService }], target: i0.ɵɵFactoryTarget.Directive });\nMdbScrollspyElementDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.2.4\", type: MdbScrollspyElementDirective, selector: \"[mdbScrollspyElement]\", inputs: { container: \"container\", scrollSpyId: [\"mdbScrollspyElement\", \"scrollSpyId\"], offset: \"offset\" }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyElementDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    // eslint-disable-next-line @angular-eslint/directive-selector\n                    selector: '[mdbScrollspyElement]',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.NgZone }, { type: MdbScrollspyService }]; }, propDecorators: { container: [{\n                type: Input\n            }], scrollSpyId: [{\n                type: Input,\n                args: ['mdbScrollspyElement']\n            }], offset: [{\n                type: Input\n            }] } });\n\nclass MdbScrollspyWindowDirective {\n    constructor(document, el, renderer, ngZone, scrollSpyService) {\n        this.document = document;\n        this.el = el;\n        this.renderer = renderer;\n        this.ngZone = ngZone;\n        this.scrollSpyService = scrollSpyService;\n        this.offset = 0;\n    }\n    get scrollSpyId() {\n        return this._scrollSpyId;\n    }\n    set scrollSpyId(newId) {\n        if (newId) {\n            this._scrollSpyId = newId;\n        }\n    }\n    isElementInViewport() {\n        const scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop;\n        const elHeight = this.el.nativeElement.offsetHeight;\n        const elTop = this.el.nativeElement.offsetTop - this.offset;\n        const elBottom = elTop + elHeight;\n        return scrollTop >= elTop && scrollTop <= elBottom;\n    }\n    updateActiveState(scrollSpyId, id) {\n        if (this.isElementInViewport()) {\n            this.scrollSpyService.updateActiveState(scrollSpyId, id);\n        }\n        else {\n            this.scrollSpyService.removeActiveState(scrollSpyId, id);\n        }\n    }\n    onScroll() {\n        this.updateActiveState(this.scrollSpyId, this.id);\n    }\n    listenToScroll() {\n        this.renderer.listen(window, 'scroll', () => {\n            this.onScroll();\n        });\n    }\n    ngOnInit() {\n        this.id = this.el.nativeElement.id;\n        this.ngZone.runOutsideAngular(this.listenToScroll.bind(this));\n    }\n    ngAfterViewInit() {\n        setTimeout(() => {\n            this.updateActiveState(this.scrollSpyId, this.id);\n        }, 0);\n    }\n}\nMdbScrollspyWindowDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyWindowDirective, deps: [{ token: DOCUMENT }, { token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i0.NgZone }, { token: MdbScrollspyService }], target: i0.ɵɵFactoryTarget.Directive });\nMdbScrollspyWindowDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.2.4\", type: MdbScrollspyWindowDirective, selector: \"[mdbScrollspyWindow]\", inputs: { scrollSpyId: [\"mdbScrollspyWindow\", \"scrollSpyId\"], offset: \"offset\" }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyWindowDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    // eslint-disable-next-line @angular-eslint/directive-selector\n                    selector: '[mdbScrollspyWindow]',\n                }]\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }, { type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.NgZone }, { type: MdbScrollspyService }];\n    }, propDecorators: { scrollSpyId: [{\n                type: Input,\n                args: ['mdbScrollspyWindow']\n            }], offset: [{\n                type: Input\n            }] } });\n\nclass MdbScrollspyModule {\n}\nMdbScrollspyModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nMdbScrollspyModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyModule, declarations: [MdbScrollspyDirective,\n        MdbScrollspyLinkDirective,\n        MdbScrollspyElementDirective,\n        MdbScrollspyWindowDirective], exports: [MdbScrollspyDirective,\n        MdbScrollspyLinkDirective,\n        MdbScrollspyElementDirective,\n        MdbScrollspyWindowDirective] });\nMdbScrollspyModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyModule, providers: [MdbScrollspyService] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.4\", ngImport: i0, type: MdbScrollspyModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [\n                        MdbScrollspyDirective,\n                        MdbScrollspyLinkDirective,\n                        MdbScrollspyElementDirective,\n                        MdbScrollspyWindowDirective,\n                    ],\n                    exports: [\n                        MdbScrollspyDirective,\n                        MdbScrollspyLinkDirective,\n                        MdbScrollspyElementDirective,\n                        MdbScrollspyWindowDirective,\n                    ],\n                    providers: [MdbScrollspyService],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MdbScrollspyDirective, MdbScrollspyElementDirective, MdbScrollspyLinkDirective, MdbScrollspyModule, MdbScrollspyService, MdbScrollspyWindowDirective };\n"]},"metadata":{},"sourceType":"module"}